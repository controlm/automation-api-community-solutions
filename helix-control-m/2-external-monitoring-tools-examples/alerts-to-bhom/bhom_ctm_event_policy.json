[{"name":"Update Control-M Events","types":["ADVANCED_ENRICHMENT"],"description":"","executionOrder":9999,"selectorCriteriaList":["class equals 'ControlMEvent'"],"enabled":false,"configurations":[{"type":"ADVANCED_ENRICHMENT","configOrder":1,"definition":{"children":[{"all":false,"children":[{"children":[{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.eventType"}],"label":"Update eventType","id":null,"type":"enrich","value":null,"key":"$OLD.eventType"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.fileName"}],"label":"Update fileName","id":null,"type":"enrich","value":null,"key":"$OLD.fileName"},{"children":[],"label":"Update severity","id":null,"type":"enrich","value":"$NEW.severity","key":"$OLD.severity"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.alertStatus"}],"label":"Update alertStatus","id":null,"type":"enrich","value":null,"key":"$OLD.alertStatus"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.user"}],"label":"Update user","id":null,"type":"enrich","value":null,"key":"$OLD.user"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.updateTime"}],"label":"Update updateTime","id":null,"type":"enrich","value":null,"key":"$OLD.updateTime"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.msg"}],"label":"Update message","id":null,"type":"enrich","value":null,"key":"$OLD.msg"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.runAs"}],"label":"Update runAs","id":null,"type":"enrich","value":null,"key":"$OLD.runAs"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.closedByControlM"}],"label":"Update closedByControlM","id":null,"type":"enrich","value":null,"key":"$OLD.closedByControlM"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.ticketNumber"}],"label":"Update ticketNumber","id":null,"type":"enrich","value":null,"key":"$OLD.ticketNumber"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.runNo"}],"label":"Update runNo","id":null,"type":"enrich","value":null,"key":"$OLD.runNo"},{"children":[{"showDescription":false,"children":[],"valueType":null,"placeholderText":null,"label":null,"id":null,"type":"data","value":"$NEW.notes"}],"label":"Update notes","id":null,"type":"enrich","value":null,"key":"$OLD.notes"},{"children":[{"children":[],"label":"Close Alert","id":null,"type":"enrich","value":"CLOSED","key":"$OLD.status"}],"label":"Check alertStatus","id":null,"type":"if","conditions":[{"slotName":"$NEW.alertStatus","slotOperator":"equals","conditionOperator":"","conditionBracket":"","conditionOrder":0,"endBracket":"","slotValue":"2"},{"slotName":"$NEW.alertStatus","slotOperator":"equals","conditionOperator":"OR","conditionBracket":"","conditionOrder":1,"endBracket":"","slotValue":"Handled"}]},{"children":[],"label":"","id":null,"type":"else"}],"label":"","id":null,"type":"updateOld"},{"children":[{"children":[],"name":"DropNewEvent","label":"Delete New Event","id":null,"type":"function"}],"label":"","id":null,"type":"updateNew"}],"withinInSeconds":0,"label":"Look for events with same alertId","id":null,"duplicate":false,"type":"lookup","conditions":[{"slotName":"$OLD.status","slotOperator":"not_equals","conditionOperator":"","conditionBracket":"","conditionOrder":0,"endBracket":"","slotValue":"BLACKOUT"},{"slotName":"$OLD.id","slotOperator":"equals","conditionOperator":"AND","conditionBracket":"","conditionOrder":1,"endBracket":"","slotValue":"$NEW.id"}],"fetchEventForClass":"ControlMEvent"}],"id":null,"label":"Policy to 1) update existing Control-M alerts if they already exist and 2) close event if alert is closed from Control-M","type":"root"},"timeframeStatus":"","subType":""}],"timeframes":["-1"]}]